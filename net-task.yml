version: 1
name: build_tasks
externals:
  - ./net-task-base.yml
tasks:
  checkpoint-build:
    os: any
    description: save debug build to bin, so I can use net-task while building net-task
    command: /bin/bash
    script: cp target/debug/net-task ~/bin/net-task
  which-debug:
    os: any
    description: where does that build get saved to?
    command: /bin/bash
    script: echo "target/debug/net-task"
  build:
    os: unix
    shell: cargo build
  build:release:
    os: any
    shell: cargo build --release
  bad:
    shell: exit 1
  ci:upload-binary:
    os: unix
    shell: |
      set -e

      net-task run build:release

      # see https://github.com/rwilcox/codenarc-cli/blob/master/build-scripts/release.sh
      #token=$(git config  github.token)
      #user=rwilcox
      #repo=net-task
      #
      #npx publish-release --token=$token --owner=$user --repo=$repo --tag=$1 --assets=target/codenarc-wrapper.jar --notes="$text" --name=$tag
